/* 预留滚动条占位，避免主题切换等操作时页面右移抖动 */
html {
  overflow-y: auto;
  scrollbar-gutter: stable;
}

/* 黑金风主题：亮色 / 暗色双模式 */
:root {
  /* 金色系（双模式共用） */
  --vivid-gold: #b8860b;
  --vivid-gold-soft: #c9a227;
  --vivid-gold-muted: rgba(184, 134, 11, 0.5);
  --vivid-gold-subtle: rgba(184, 134, 11, 0.12);
  /* 亮色模式 */
  --color-fd-background: #fafaf9;
  --color-fd-foreground: #1a1a1a;
  --color-fd-muted: #f5f5f4;
  --color-fd-muted-foreground: #57534e;
  --color-fd-popover: #ffffff;
  --color-fd-popover-foreground: #1a1a1a;
  --color-fd-card: #ffffff;
  --color-fd-card-foreground: #1a1a1a;
  --color-fd-border: rgba(184, 134, 11, 0.25);
  --color-fd-primary: var(--vivid-gold);
  --color-fd-primary-foreground: #ffffff;
  --color-fd-secondary: #f5f5f4;
  --color-fd-secondary-foreground: #1a1a1a;
  --color-fd-accent: var(--vivid-gold-subtle);
  --color-fd-accent-foreground: #1a1a1a;
  --color-fd-ring: var(--vivid-gold-muted);
  --color-fd-overlay: rgba(0, 0, 0, 0.4);
  /* 亮色模式：终端区用浅底，与页面统一且保证对比度 */
  --vivid-terminal-bg: #f5f5f4;
  --vivid-terminal-fg: #1c1917;
  --vivid-terminal-accent: #b8860b;
}

.dark {
  --vivid-gold: #d4af37;
  --vivid-gold-soft: #e8c547;
  --vivid-gold-muted: rgba(212, 175, 55, 0.45);
  --vivid-gold-subtle: rgba(212, 175, 55, 0.12);
  --color-fd-background: #080808;
  --color-fd-foreground: #f5f5f5;
  --color-fd-muted: #0f0f0f;
  --color-fd-muted-foreground: rgba(245, 245, 245, 0.7);
  --color-fd-popover: #0c0c0c;
  --color-fd-popover-foreground: #f5f5f5;
  --color-fd-card: #0c0c0c;
  --color-fd-card-foreground: #f5f5f5;
  --color-fd-border: rgba(212, 175, 55, 0.2);
  --color-fd-primary: var(--vivid-gold);
  --color-fd-primary-foreground: #080808;
  --color-fd-secondary: #141414;
  --color-fd-secondary-foreground: #f5f5f5;
  --color-fd-accent: var(--vivid-gold-subtle);
  --color-fd-accent-foreground: var(--vivid-gold-soft);
  --color-fd-ring: var(--vivid-gold-muted);
  --color-fd-overlay: rgba(0, 0, 0, 0.6);
  /* 暗色模式：深色终端 */
  --vivid-terminal-bg: #0a0a0a;
  --vivid-terminal-fg: #f5f5f5;
  --vivid-terminal-accent: #e8c547;
}

/* 首页主容器：内容宽度更宽（约 92% 视口 / 1440px），亮/暗双模式渐变；禁止横向滚动 */
#nd-home-layout {
  --fd-layout-width: min(92vw, 1440px);
  --vivid-nav-height: 3.5625rem;   /* 57px 导航栏 */
  --vivid-banner-height: 2.5625rem; /* 41px Banner */
  --vivid-header-total: calc(var(--vivid-nav-height) + var(--vivid-banner-height));
  overflow-x: hidden;
  background: radial-gradient(ellipse 90% 45% at 50% -15%, var(--vivid-gold-subtle), transparent 55%),
    var(--color-fd-background);
  padding-top: var(--vivid-header-total);
}
.dark #nd-home-layout {
  background: radial-gradient(ellipse 80% 50% at 50% -20%, var(--vivid-gold-subtle), transparent 60%),
    var(--color-fd-background);
}

/* 首页导航与 Banner 使用 fixed 始终固顶（避免受父级 overflow 影响） */
#nd-home-layout #nd-nav {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 50;
}
#nd-home-layout #dev-status {
  position: fixed !important;
  top: var(--vivid-nav-height);
  left: 0;
  right: 0;
  z-index: 40;
}

/* 首页内容区：75% 宽度 + 适中边距 */
.vivid-home-content {
  width: 100%;
  max-width: var(--fd-layout-width);
  margin-left: auto;
  margin-right: auto;
  padding-left: 1rem;
  padding-right: 1rem;
}
@media (min-width: 768px) {
  .vivid-home-content {
    padding-left: 1.5rem;
    padding-right: 1.5rem;
  }
}
@media (min-width: 1024px) {
  .vivid-home-content {
    padding-left: 2rem;
    padding-right: 2rem;
  }
}

/* 区块标题下的金色短线：居中、紧贴标题，不单独占左上角 */
.vivid-section-title {
  position: relative;
  display: inline-block;
}
.vivid-section-title::after {
  content: '';
  position: absolute;
  left: 50%;
  bottom: -6px;
  width: 2rem;
  height: 2px;
  border-radius: 1px;
  background: var(--vivid-gold-muted);
  transform: translateX(-50%);
}

/* ========== 动效：关键帧 ========== */
@keyframes vivid-fade-in-up {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes vivid-fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes vivid-glow-pulse {
  0%,
  100% {
    box-shadow: 0 0 20px rgba(212, 175, 55, 0.25);
  }
  50% {
    box-shadow: 0 0 32px rgba(212, 175, 55, 0.4);
  }
}

@keyframes vivid-scale-in {
  from {
    opacity: 0;
    transform: scale(0.96);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes vivid-line-grow {
  from {
    transform: scaleX(0);
    opacity: 0.6;
  }
  to {
    transform: scaleX(1);
    opacity: 1;
  }
}

/* ========== 主题切换：从点击位置圆形扩散 + 可回退 ========== */

/* 动画期间由 JS 通过阻止 wheel/touchmove 禁滚，不设 overflow 以保留滚动条避免抖动 */
html.vivid-theme-transition-no-scroll,
body.vivid-theme-transition-no-scroll {
  /* 仅作标记，滚动由事件阻止 */
}

/* 孔洞内透明（露出页面=新主题），孔洞外显示遮罩（截图=旧主题内容） */
.vivid-theme-radiate-overlay {
  position: fixed;
  inset: 0;
  z-index: 9999;
  pointer-events: none;
  --vivid-radiate-x: 50vw;
  --vivid-radiate-y: 50vh;
  --vivid-radiate-size: 0px;
  -webkit-mask-image: radial-gradient(
    circle at var(--vivid-radiate-x) var(--vivid-radiate-y),
    transparent 0,
    transparent calc(var(--vivid-radiate-size) / 2),
    black calc(var(--vivid-radiate-size) / 2)
  );
  mask-image: radial-gradient(
    circle at var(--vivid-radiate-x) var(--vivid-radiate-y),
    transparent 0,
    transparent calc(var(--vivid-radiate-size) / 2),
    black calc(var(--vivid-radiate-size) / 2)
  );
}
/* 遮罩使用与页面一致的背景（不依赖根主题变量，避免已切到新主题时取错色） */
.vivid-theme-radiate-overlay[data-theme='dark'] {
  background: radial-gradient(ellipse 80% 50% at 50% -20%, rgba(212, 175, 55, 0.12), transparent 60%),
    #080808;
}
.vivid-theme-radiate-overlay[data-theme='light'] {
  background: radial-gradient(ellipse 90% 45% at 50% -15%, rgba(184, 134, 11, 0.12), transparent 55%),
    #fafaf9;
}

@property --vivid-radiate-size {
  syntax: '<length>';
  initial-value: 0px;
  inherits: false;
}

/* 扩散：圆形从点击处由小变大 */
.vivid-theme-radiate-overlay.vivid-theme-radiate-expand {
  animation: vivid-theme-circle-size-expand var(--vivid-radiate-duration, 1000ms) cubic-bezier(0.33, 1, 0.68, 1) forwards;
}

/* 回退：圆形由大变小 */
.vivid-theme-radiate-overlay.vivid-theme-radiate-revert {
  animation: vivid-theme-circle-size-revert var(--vivid-radiate-duration, 600ms) cubic-bezier(0.33, 1, 0.68, 1) forwards;
}

@keyframes vivid-theme-circle-size-expand {
  0% {
    --vivid-radiate-size: 0px;
  }
  100% {
    --vivid-radiate-size: 320vmax;
  }
}

@keyframes vivid-theme-circle-size-revert {
  0% {
    --vivid-radiate-size: var(--vivid-radiate-size-start, 320vmax);
  }
  100% {
    --vivid-radiate-size: 0px;
  }
}

/* 切换按钮图标：平滑过渡（旋转 + 透明度） */
@keyframes vivid-icon-transition {
  0% {
    transform: rotate(0deg);
    opacity: 1;
  }
  50% {
    transform: rotate(90deg);
    opacity: 0.5;
  }
  100% {
    transform: rotate(180deg);
    opacity: 1;
  }
}

/* 主题切换按钮：可点击时手型，不可点击时禁用 */
[data-theme-toggle] {
  cursor: pointer;
}
/* 切换未完成时禁止按钮点击 */
html.vivid-theme-icon-transition [data-theme-toggle] {
  pointer-events: none;
  cursor: not-allowed;
  opacity: 0.85;
}

/* 仅对点击时已存在的图标做旋转，避免主题切换后新图标再跑一次动画导致“翻两次” */
html.vivid-theme-icon-transition [data-theme-toggle][data-icon-transitioning] {
  transition: transform 0.25s ease, opacity 0.25s ease;
}
html.vivid-theme-icon-transition [data-theme-toggle][data-icon-transitioning] svg {
  animation: vivid-icon-transition 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

/* 入场动画工具类 */
.vivid-animate-in-up {
  animation: vivid-fade-in-up 0.6s cubic-bezier(0.22, 1, 0.36, 1) forwards;
}
.vivid-animate-in {
  animation: vivid-fade-in 0.5s ease-out forwards;
}
.vivid-animate-scale-in {
  animation: vivid-scale-in 0.5s cubic-bezier(0.22, 1, 0.36, 1) forwards;
}
.vivid-delay-1 { animation-delay: 0.1s; }
.vivid-delay-2 { animation-delay: 0.2s; }
.vivid-delay-3 { animation-delay: 0.3s; }
.vivid-delay-4 { animation-delay: 0.45s; }
.vivid-delay-5 { animation-delay: 0.6s; }
.vivid-delay-6 { animation-delay: 0.75s; }
.vivid-delay-7 { animation-delay: 0.9s; }

/* 初始不可见，由动画带出 */
.vivid-opacity-start {
  opacity: 0;
}

/* 卡片悬停：轻微上浮 + 金边光晕 */
.vivid-card-hover {
  transition: transform 0.25s cubic-bezier(0.22, 1, 0.36, 1),
    box-shadow 0.25s ease,
    border-color 0.2s ease;
}
.vivid-card-hover:hover {
  transform: translateY(-4px);
  box-shadow: 0 12px 28px rgba(0, 0, 0, 0.35), 0 0 0 1px var(--vivid-gold-muted);
}

/* 主按钮悬停：光晕脉冲 */
.vivid-btn-glow {
  transition: box-shadow 0.3s ease, transform 0.2s ease;
}
.vivid-btn-glow:hover {
  box-shadow: 0 0 28px rgba(212, 175, 55, 0.45);
  transform: translateY(-1px);
}
.vivid-btn-glow:active {
  transform: translateY(0);
}

/* 次要按钮 / 链接悬停 */
.vivid-btn-outline-hover {
  transition: border-color 0.2s ease, background-color 0.2s ease, transform 0.2s ease;
}
.vivid-btn-outline-hover:hover {
  transform: translateY(-1px);
}

/* ========== 首页营销级视觉 ========== */
.vivid-hero-tagline {
  font-size: clamp(1.25rem, 4vw, 2rem);
  line-height: 1.35;
  letter-spacing: -0.02em;
}
.vivid-trust-strip {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  justify-content: center;
  gap: 0.5rem 1.25rem;
  font-size: 0.9375rem;
  font-weight: 500;
  color: var(--vivid-gold-soft);
}
.vivid-trust-strip span {
  position: relative;
  padding-right: 1.25rem;
}
.vivid-trust-strip span:not(:last-child)::after {
  content: '·';
  position: absolute;
  right: 0.35rem;
  font-weight: 700;
  color: var(--vivid-gold-muted);
}
/* 有背景的区块：内边距留白，避免文字贴边 */
.vivid-section-alt {
  background: linear-gradient(180deg, rgba(184, 134, 11, 0.07) 0%, rgba(184, 134, 11, 0.02) 25%, transparent 100%);
  padding-left: 1.5rem;
  padding-right: 1.5rem;
}
.dark .vivid-section-alt {
  background: linear-gradient(180deg, rgba(212, 175, 55, 0.08) 0%, rgba(212, 175, 55, 0.02) 30%, transparent 100%);
}
@media (min-width: 768px) {
  .vivid-section-alt {
    padding-left: 2.5rem;
    padding-right: 2.5rem;
  }
}
/* CTA：独立于 .vivid-home-content，占满主布局宽度，简洁底+底部金色光晕 */
/* CTA 底部光晕：呼吸灯 + 位置漂移，光晕自底部向上 */
@keyframes vivid-cta-glow-breathe {
  0%, 100% {
    opacity: 0.7;
    transform: translate(-50%, 0) scale(0.92);
  }
  50% {
    opacity: 1;
    transform: translate(-50%, 0) scale(1.08);
  }
}
@keyframes vivid-cta-glow-drift {
  0%, 100% {
    left: 50%;
  }
  20% {
    left: 32%;
  }
  40% {
    left: 68%;
  }
  60% {
    left: 42%;
  }
  80% {
    left: 58%;
  }
}
.vivid-cta-section {
  position: relative;
  overflow: hidden;
  width: 100%;
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 4rem 1.5rem;
  background: var(--color-fd-muted);
}
.vivid-cta-section::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 50%;
  width: 160%;
  max-width: 1000px;
  height: 120%;
  transform: translate(-50%, 0);
  transform-origin: 50% 100%;
  /* 渐变中心在伪元素底部，光晕向上扩散；缩放以底部为原点，避免底部露黑边 */
  background: radial-gradient(ellipse 70% 50% at 50% 100%, rgba(184, 134, 11, 0.22), transparent 58%);
  pointer-events: none;
  z-index: 0;
  animation:
    vivid-cta-glow-breathe 5s ease-in-out infinite,
    vivid-cta-glow-drift 16s ease-in-out infinite;
}
.dark .vivid-cta-section::after {
  background: radial-gradient(ellipse 70% 50% at 50% 100%, rgba(212, 175, 55, 0.25), transparent 58%);
}
@media (min-width: 768px) {
  .vivid-cta-section {
    padding: 5.5rem 2.5rem;
  }
}
.vivid-cta-section-inner {
  position: relative;
  z-index: 1;
  width: 100%;
  max-width: 56rem;
  margin-left: auto;
  margin-right: auto;
  text-align: center;
}
.vivid-cta-title {
  font-size: clamp(1.75rem, 4.5vw, 2.5rem);
  font-weight: 800;
  letter-spacing: -0.03em;
  line-height: 1.2;
}
.vivid-hero-diagram {
  width: 100%;
  max-width: 320px;
  margin: 0 auto;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.75rem;
  padding: 0.75rem 1rem;
  border-radius: 9999px;
  background: linear-gradient(135deg, rgba(184, 134, 11, 0.06) 0%, transparent 50%);
  border: 1px solid rgba(184, 134, 11, 0.15);
}
.dark .vivid-hero-diagram {
  background: linear-gradient(135deg, rgba(212, 175, 55, 0.08) 0%, transparent 50%);
  border-color: rgba(212, 175, 55, 0.2);
}
.vivid-hero-diagram .node {
  width: 52px;
  height: 52px;
  border-radius: 50%;
  border: 1px solid var(--vivid-gold-muted);
  background: var(--color-fd-card);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.625rem;
  font-weight: 600;
  color: var(--vivid-gold-soft);
  letter-spacing: 0.04em;
}
.vivid-hero-diagram .node.node-msg {
  width: 44px;
  height: 44px;
  font-size: 0.6rem;
  background: var(--vivid-gold-subtle);
  border-color: var(--vivid-gold-muted);
}
.dark .vivid-hero-diagram .node {
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.2);
}
.dark .vivid-hero-diagram .node.node-msg {
  background: var(--vivid-gold-subtle);
}
.vivid-hero-diagram .arrow {
  flex: 0 0 32px;
  height: 1.5px;
  background: var(--vivid-gold-muted);
  position: relative;
  opacity: 0.8;
}
.vivid-hero-diagram .arrow::after {
  content: '';
  position: absolute;
  right: 0;
  top: 50%;
  transform: translateY(-50%);
  border: 4px solid transparent;
  border-left-color: var(--vivid-gold-muted);
  border-right: none;
}
.vivid-terminal-window {
  border-radius: 14px;
  overflow: hidden;
  border: 1px solid var(--color-fd-border);
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.14), 0 0 0 1px rgba(0, 0, 0, 0.04), 0 0 0 3px var(--vivid-gold-subtle);
  transition: box-shadow 0.3s ease, border-color 0.2s ease;
}
/* 亮色模式：终端内容区浅底，边框与正文区分 */
.vivid-terminal-window .border-t-0.border {
  border-color: rgba(120, 113, 108, 0.35);
}
.vivid-terminal-window:hover {
  border-color: var(--vivid-gold-muted);
  box-shadow: 0 16px 48px rgba(0, 0, 0, 0.16), 0 0 0 1px var(--vivid-gold-muted), 0 0 24px rgba(184, 134, 11, 0.15);
}
.dark .vivid-terminal-window .border-t-0.border {
  border-color: var(--color-fd-border);
}
.dark .vivid-terminal-window {
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.5), 0 0 0 3px var(--vivid-gold-subtle);
}
.dark .vivid-terminal-window:hover {
  box-shadow: 0 20px 56px rgba(0, 0, 0, 0.55), 0 0 0 1px var(--vivid-gold-muted), 0 0 32px rgba(212, 175, 55, 0.12);
}
.vivid-terminal-window .title-bar {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1rem;
  background: var(--color-fd-muted);
  border-bottom: 1px solid var(--color-fd-border);
  font-size: 0.75rem;
  color: var(--color-fd-muted-foreground);
}
.vivid-terminal-window .title-bar .dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
}
.vivid-terminal-window .title-bar .dot:nth-child(1) { background: #ef4444; }
.vivid-terminal-window .title-bar .dot:nth-child(2) { background: #eab308; }
.vivid-terminal-window .title-bar .dot:nth-child(3) { background: #22c55e; }
.vivid-section-heading {
  font-size: clamp(1.625rem, 4vw, 2.5rem);
  font-weight: 700;
  letter-spacing: -0.025em;
}
/* 区块标题下方金色装饰线，增强色彩 */
.vivid-section-heading-accent.vivid-section-title::after {
  width: 3rem;
  height: 3px;
  border-radius: 2px;
  background: linear-gradient(90deg, var(--vivid-gold-muted), var(--vivid-gold));
  bottom: -8px;
}
/* Hero 标题：金色渐变字，增强冲击 */
.vivid-hero-title-gradient {
  background: linear-gradient(135deg, var(--vivid-gold-soft) 0%, var(--vivid-gold) 50%, #a67c00 100%);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  color: var(--vivid-gold);
}
.dark .vivid-hero-title-gradient {
  background: linear-gradient(135deg, #e8c547 0%, var(--vivid-gold) 50%, #c9a227 100%);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
}
/* Hero 标题光晕：呼吸灯（透明度+缩放）+ 位置漂移 */
@keyframes vivid-hero-glow-breathe {
  0%, 100% {
    opacity: 0.6;
    transform: translate(-50%, -50%) scale(0.9);
  }
  50% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1.1);
  }
}
@keyframes vivid-hero-glow-drift {
  0%, 100% {
    left: 50%;
    top: 50%;
  }
  16% {
    left: 36%;
    top: 44%;
  }
  33% {
    left: 64%;
    top: 54%;
  }
  50% {
    left: 44%;
    top: 64%;
  }
  66% {
    left: 58%;
    top: 36%;
  }
  83% {
    left: 52%;
    top: 48%;
  }
}
.vivid-hero-glow {
  position: relative;
  z-index: 0;
}
.vivid-hero-glow::before {
  content: '';
  position: absolute;
  left: 50%;
  top: 50%;
  width: 120%;
  max-width: 520px;
  height: 140%;
  transform: translate(-50%, -50%);
  background: radial-gradient(ellipse 70% 60%, rgba(184, 134, 11, 0.22), transparent 65%);
  pointer-events: none;
  z-index: -1;
  animation:
    vivid-hero-glow-breathe 4.5s ease-in-out infinite,
    vivid-hero-glow-drift 18s ease-in-out infinite;
}
.dark .vivid-hero-glow::before {
  background: radial-gradient(ellipse 70% 60%, rgba(212, 175, 55, 0.24), transparent 65%);
}
/* 推荐阅读卡片：悬停时左侧金线 */
.vivid-doc-card {
  border-left: 3px solid transparent;
  transition: border-left-color 0.2s ease, padding-left 0.2s ease;
}
.vivid-doc-card:hover {
  border-left-color: var(--vivid-gold);
  padding-left: calc(1.5rem - 3px);
}
@media (min-width: 768px) {
  .vivid-doc-card:hover {
    padding-left: calc(1.75rem - 3px);
  }
}
